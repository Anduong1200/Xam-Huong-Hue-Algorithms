<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xăm Hường Huế Simulation</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header>
            <h1>Xăm Hường Huế</h1>
            <div class="subtitle">Mô phỏng & Phân tích Xác suất</div>
        </header>

        <main>
            <!-- Game Area -->
            <section class="game-area">
                <div class="bowl-container">
                    <div id="bowl" class="bowl">
                        <!-- Dice will be injected here -->
                        <div class="dice-placeholder">Sẵn sàng</div>
                    </div>
                </div>

                <div class="controls">
                    <button id="btn-roll" class="btn-primary">Đổ Hột (Roll)</button>
                    <div class="bet-info">
                        Đặt cược: <span id="bet-amount">1</span> xu
                    </div>
                </div>

                <div id="result-display" class="result-box">
                    Kết quả: <span id="result-text">---</span>
                    <div id="payout-display" class="payout-text">Payout: 0x</div>
                </div>
            </section>

            <!-- Analysis & Config Panel -->
            <section class="analysis-panel">
                <div class="tabs">
                    <button class="tab-btn active" data-tab="config">Cấu hình (Config)</button>
                    <button class="tab-btn" data-tab="analysis">Phân tích (Analysis)</button>
                    <button class="tab-btn" data-tab="log">Nhật ký (Log)</button>
                </div>

                <div id="tab-config" class="tab-content active">
                    <div class="config-group">
                        <label>Độ lệch mặt Hường (p4): <span id="p4-val-display">0.1667</span></label>
                        <input type="range" id="p4-slider" min="0.05" max="0.5" step="0.001" value="0.1666667">
                        <div class="presets">
                            <button class="btn-small" onclick="setParams(0.166667)">Chuẩn (1/6)</button>
                            <button class="btn-small" onclick="setParams(0.222584)">K≥2 (40%)</button>
                            <button class="btn-small" onclick="setParams(0.264450)">K≥2 (50%)</button>
                        </div>
                    </div>
                    <div class="config-group">
                        <label>Mục tiêu Win-Rate (Solver):</label>
                        <div class="solver-controls">
                            <select id="target-event">
                                <option value="K>=2">K >= 2</option>
                                <option value="K>=3">K >= 3</option>
                            </select>
                            <input type="number" id="target-rate" value="0.4" step="0.05" min="0.1" max="0.9">
                            <button id="btn-solve" class="btn-secondary">Tìm p4</button>
                        </div>
                    </div>
                </div>

                <div id="tab-analysis" class="tab-content">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <h3>Lý thuyết (Exact)</h3>
                            <div id="exact-stats">Calculating...</div>
                        </div>
                        <div class="stat-card">
                            <h3>Mô phỏng (Monte Carlo)</h3>
                            <div class="mc-controls">
                                <input type="number" id="mc-trials" value="10000"> lượt
                                <button id="btn-run-mc" class="btn-secondary">Chạy thử</button>
                            </div>
                            <div id="mc-stats">---</div>
                        </div>
                    </div>
                </div>

                <div id="tab-log" class="tab-content">
                    <ul id="game-log" class="log-list"></ul>
                </div>
            </section>
        </main>
    </div>

    <script src="engine.js"></script>
    <script src="script.js"></script>
</body>
</html>
